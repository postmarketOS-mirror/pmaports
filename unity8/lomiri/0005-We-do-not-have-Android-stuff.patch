From dd0f625486ec248b89f4c9cf83b6d96a9382f780 Mon Sep 17 00:00:00 2001
From: Luca Weiss <luca@z3ntu.xyz>
Date: Sat, 17 Apr 2021 11:16:53 +0200
Subject: [PATCH 5/6] We do not have Android stuff

---
 plugins/CMakeLists.txt    | 2 +-
 src/CMakeLists.txt        | 5 -----
 src/LomiriApplication.cpp | 7 +------
 3 files changed, 2 insertions(+), 12 deletions(-)

diff --git a/plugins/CMakeLists.txt b/plugins/CMakeLists.txt
index 4d53e21bd..09ac97dae 100644
--- a/plugins/CMakeLists.txt
+++ b/plugins/CMakeLists.txt
@@ -16,7 +16,7 @@ add_subdirectory(Cursor)
 add_subdirectory(GlobalShortcut)
 add_subdirectory(Greeter)
 add_subdirectory(LightDM)
-add_subdirectory(Lights)
+#add_subdirectory(Lights)
 add_subdirectory(Powerd)
 add_subdirectory(ScreenshotDirectory)
 add_subdirectory(SessionBroadcast)
diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index 39f2cccfd..1eff11e37 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -43,7 +43,6 @@ if (ENABLE_TOUCH_EMULATION)
     set(SOURCE_FILES ${SOURCE_FILES} MouseTouchAdaptor.cpp)
 endif()
 
-pkg_check_modules(ANDROID_PROPERTIES REQUIRED libandroid-properties)
 pkg_check_modules(SYSTEMD REQUIRED libsystemd)
 
 include_directories(
@@ -52,12 +51,8 @@ include_directories(
 
 add_executable(${SHELL_APP} ${SOURCE_FILES})
 
-if (NOT "${ANDROID_PROPERTIES_INCLUDE_DIRS}" STREQUAL "")
-    set_target_properties(${SHELL_APP} PROPERTIES INCLUDE_DIRECTORIES ${ANDROID_PROPERTIES_INCLUDE_DIRS})
-endif()
 target_link_libraries(${SHELL_APP}
     Qt5::DBus Qt5::Gui Qt5::Qml Qt5::Quick Qt5::Test
-    ${ANDROID_PROPERTIES_LDFLAGS}
     ${GSETTINGS_QT_LDFLAGS}
     ${QTMIRSERVER_LDFLAGS}
     ${SYSTEMD_LDFLAGS}
diff --git a/src/LomiriApplication.cpp b/src/LomiriApplication.cpp
index f9e3ecb4b..21f53566e 100644
--- a/src/LomiriApplication.cpp
+++ b/src/LomiriApplication.cpp
@@ -27,9 +27,6 @@
 
 #include <libintl.h>
 
-// libandroid-properties
-#include <hybris/properties/properties.h>
-
 // qtmir
 #include <qtmir/displayconfigurationstorage.h>
 
@@ -56,9 +53,7 @@ LomiriApplication::LomiriApplication(int & argc, char ** argv)
     setupQmlEngine();
 
     if (m_qmlArgs.deviceName().isEmpty()) {
-        char buffer[200];
-        property_get("ro.product.device", buffer /* value */, "desktop" /* default_value*/);
-        m_qmlArgs.setDeviceName(QString(buffer));
+        m_qmlArgs.setDeviceName("desktop");
     }
 
     // The testability driver is only loaded by QApplication but not by QGuiApplication.
-- 
2.32.0

