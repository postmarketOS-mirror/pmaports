From 32716095113ca79c4d555ec5f9f0a448ad1612df Mon Sep 17 00:00:00 2001
From: Luca Weiss <luca@z3ntu.xyz>
Date: Mon, 5 Apr 2021 16:22:23 +0200
Subject: [PATCH] Rename to Lomiri

WIP missing: Debian packaging
---
 CMakeLists.txt                                        |  8 ++++----
 include/CMakeLists.txt                                |  2 +-
 include/{unity => lomiri}/CMakeLists.txt              |  0
 include/{unity => lomiri}/gmenuharness/CMakeLists.txt |  0
 include/{unity => lomiri}/gmenuharness/MatchResult.h  |  4 ++--
 include/{unity => lomiri}/gmenuharness/MatchUtils.h   |  4 ++--
 .../{unity => lomiri}/gmenuharness/MenuItemMatcher.h  |  4 ++--
 include/{unity => lomiri}/gmenuharness/MenuMatcher.h  | 11 ++++++-----
 src/CMakeLists.txt                                    |  4 ++--
 src/MatchResult.cpp                                   |  6 +++---
 src/MatchUtils.cpp                                    | 10 +++++-----
 src/MenuItemMatcher.cpp                               | 10 +++++-----
 src/MenuMatcher.cpp                                   |  8 ++++----
 src/libgmenuharness.map                               | 10 +++++-----
 tests/functional/FunctionalTests.cpp                  |  4 ++--
 tests/functional/menus/Deeper.cpp                     |  4 ++--
 tests/functional/menus/MenuMain.cpp                   |  8 ++++----
 tests/functional/menus/Simple.cpp                     |  4 ++--
 tests/unit/TestMatchResult.cpp                        |  4 ++--
 19 files changed, 53 insertions(+), 52 deletions(-)
 rename include/{unity => lomiri}/CMakeLists.txt (100%)
 rename include/{unity => lomiri}/gmenuharness/CMakeLists.txt (100%)
 rename include/{unity => lomiri}/gmenuharness/MatchResult.h (97%)
 rename include/{unity => lomiri}/gmenuharness/MatchUtils.h (96%)
 rename include/{unity => lomiri}/gmenuharness/MenuItemMatcher.h (98%)
 rename include/{unity => lomiri}/gmenuharness/MenuMatcher.h (92%)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 4ed1632..70eea51 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -16,7 +16,7 @@ set(GMENU_HARNESS_SO_VERSION_MINOR "1")
 set(GMENU_HARNESS_SO_VERSION_MICRO "0")
 set(GMENU_HARNESS_SO_VERSION ${GMENU_HARNESS_SO_VERSION_MAJOR}.${GMENU_HARNESS_SO_VERSION_MINOR})
 set(GMENU_HARNESS_HDR_INSTALL_BASE_DIR ${CMAKE_INSTALL_FULL_INCLUDEDIR}/${GMENU_HARNESS}-${GMENU_HARNESS_SO_VERSION})
-set(GMENU_HARNESS_HDR_INSTALL_DIR ${GMENU_HARNESS_HDR_INSTALL_BASE_DIR}/unity/${GMENU_HARNESS})
+set(GMENU_HARNESS_HDR_INSTALL_DIR ${GMENU_HARNESS_HDR_INSTALL_BASE_DIR}/lomiri/${GMENU_HARNESS})
 
 include_directories(include)
 
@@ -30,10 +30,10 @@ pkg_check_modules(
 include_directories(${GLIB_INCLUDE_DIRS})
 
 pkg_check_modules(
-  UNITY_API REQUIRED
-  libunity-api
+  LOMIRI_API REQUIRED
+  liblomiri-api
 )
-include_directories(${UNITY_API_INCLUDE_DIRS})
+include_directories(${LOMIRI_API_INCLUDE_DIRS})
 
 add_subdirectory(src)
 add_subdirectory(include)
diff --git a/include/CMakeLists.txt b/include/CMakeLists.txt
index 9d74e15..2fa0679 100644
--- a/include/CMakeLists.txt
+++ b/include/CMakeLists.txt
@@ -1 +1 @@
-add_subdirectory(unity)
+add_subdirectory(lomiri)
diff --git a/include/unity/CMakeLists.txt b/include/lomiri/CMakeLists.txt
similarity index 100%
rename from include/unity/CMakeLists.txt
rename to include/lomiri/CMakeLists.txt
diff --git a/include/unity/gmenuharness/CMakeLists.txt b/include/lomiri/gmenuharness/CMakeLists.txt
similarity index 100%
rename from include/unity/gmenuharness/CMakeLists.txt
rename to include/lomiri/gmenuharness/CMakeLists.txt
diff --git a/include/unity/gmenuharness/MatchResult.h b/include/lomiri/gmenuharness/MatchResult.h
similarity index 97%
rename from include/unity/gmenuharness/MatchResult.h
rename to include/lomiri/gmenuharness/MatchResult.h
index 8503a98..c545dbf 100644
--- a/include/unity/gmenuharness/MatchResult.h
+++ b/include/lomiri/gmenuharness/MatchResult.h
@@ -22,7 +22,7 @@
 #include <memory>
 #include <string>
 
-namespace unity
+namespace lomiri
 {
 
 namespace gmenuharness
@@ -63,4 +63,4 @@ protected:
 
 }   // namespace gmenuharness
 
-}   // namespace unity
+}   // namespace lomiri
diff --git a/include/unity/gmenuharness/MatchUtils.h b/include/lomiri/gmenuharness/MatchUtils.h
similarity index 96%
rename from include/unity/gmenuharness/MatchUtils.h
rename to include/lomiri/gmenuharness/MatchUtils.h
index 899e506..3b20ab7 100644
--- a/include/unity/gmenuharness/MatchUtils.h
+++ b/include/lomiri/gmenuharness/MatchUtils.h
@@ -23,7 +23,7 @@
 
 #include <gio/gio.h>
 
-namespace unity
+namespace lomiri
 {
 
 namespace gmenuharness
@@ -39,4 +39,4 @@ void gvariant_deleter(GVariant* varptr);
 
 }  //namespace gmenuharness
 
-}  // namespace unity
+}  // namespace lomiri
diff --git a/include/unity/gmenuharness/MenuItemMatcher.h b/include/lomiri/gmenuharness/MenuItemMatcher.h
similarity index 98%
rename from include/unity/gmenuharness/MenuItemMatcher.h
rename to include/lomiri/gmenuharness/MenuItemMatcher.h
index 6582dfe..b32d991 100644
--- a/include/unity/gmenuharness/MenuItemMatcher.h
+++ b/include/lomiri/gmenuharness/MenuItemMatcher.h
@@ -24,7 +24,7 @@
 
 #include <gio/gio.h>
 
-namespace unity
+namespace lomiri
 {
 
 namespace gmenuharness
@@ -142,4 +142,4 @@ protected:
 
 }   // namespace gmenuharness
 
-}   // namespace unity
+}   // namespace lomiri
diff --git a/include/unity/gmenuharness/MenuMatcher.h b/include/lomiri/gmenuharness/MenuMatcher.h
similarity index 92%
rename from include/unity/gmenuharness/MenuMatcher.h
rename to include/lomiri/gmenuharness/MenuMatcher.h
index c2eb65e..91524c1 100644
--- a/include/unity/gmenuharness/MenuMatcher.h
+++ b/include/lomiri/gmenuharness/MenuMatcher.h
@@ -25,13 +25,13 @@ do {\
                       GTEST_NONFATAL_FAILURE_) << result.concat_failures().c_str(); \
 } while (0)
 
-#include <unity/gmenuharness/MatchResult.h>
-#include <unity/gmenuharness/MenuItemMatcher.h>
+#include <lomiri/gmenuharness/MatchResult.h>
+#include <lomiri/gmenuharness/MenuItemMatcher.h>
 
 #include <memory>
 #include <vector>
 
-namespace unity
+namespace lomiri
 {
 
 namespace gmenuharness
@@ -90,6 +90,7 @@ protected:
     std::shared_ptr<Priv> p;
 };
 
-}   // gmenuharness
+}   // namespace gmenuharness
+
+}   // namespace lomiri
 
-}   // unity
diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index 6212ef2..ad37225 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -1,5 +1,5 @@
-pkg_check_modules(UNITY_API libunity-api>=0.1.3 REQUIRED)
-include_directories(${UNITY_API_INCLUDE_DIRS})
+pkg_check_modules(LOMIRI_API liblomiri-api>=0.1.1 REQUIRED)
+include_directories(${LOMIRI_API_INCLUDE_DIRS})
 
 add_library(
     ${GMENU_HARNESS} SHARED
diff --git a/src/MatchResult.cpp b/src/MatchResult.cpp
index 1ecbe18..1e41d56 100644
--- a/src/MatchResult.cpp
+++ b/src/MatchResult.cpp
@@ -16,7 +16,7 @@
  * Authored by: Pete Woods <pete.woods@canonical.com>
  */
 
-#include <unity/gmenuharness/MatchResult.h>
+#include <lomiri/gmenuharness/MatchResult.h>
 
 #include <chrono>
 #include <map>
@@ -25,7 +25,7 @@
 
 using namespace std;
 
-namespace unity
+namespace lomiri
 {
 
 namespace gmenuharness
@@ -184,4 +184,4 @@ string MatchResult::concat_failures() const
 
 }   // namespace gmenuharness
 
-}   // namespace unity
+}   // namespace lomiri
diff --git a/src/MatchUtils.cpp b/src/MatchUtils.cpp
index 7f2c98e..43f885a 100644
--- a/src/MatchUtils.cpp
+++ b/src/MatchUtils.cpp
@@ -16,16 +16,16 @@
  * Authored by: Pete Woods <pete.woods@canonical.com>
  */
 
-#include <unity/gmenuharness/MatchUtils.h>
+#include <lomiri/gmenuharness/MatchUtils.h>
 
-#include <unity/util/ResourcePtr.h>
+#include <lomiri/util/ResourcePtr.h>
 
 #include <functional>
 
 using namespace std;
-namespace util = unity::util;
+namespace util = lomiri::util;
 
-namespace unity
+namespace lomiri
 {
 
 namespace gmenuharness
@@ -73,4 +73,4 @@ void gvariant_deleter(GVariant* varptr)
 
 }   // namespace gmenuharness
 
-}   // namespace unity
+}   // namespace lomiri
diff --git a/src/MenuItemMatcher.cpp b/src/MenuItemMatcher.cpp
index 788d0c4..1301014 100644
--- a/src/MenuItemMatcher.cpp
+++ b/src/MenuItemMatcher.cpp
@@ -16,9 +16,9 @@
  * Authored by: Pete Woods <pete.woods@canonical.com>
  */
 
-#include <unity/gmenuharness/MatchResult.h>
-#include <unity/gmenuharness/MatchUtils.h>
-#include <unity/gmenuharness/MenuItemMatcher.h>
+#include <lomiri/gmenuharness/MatchResult.h>
+#include <lomiri/gmenuharness/MatchUtils.h>
+#include <lomiri/gmenuharness/MenuItemMatcher.h>
 
 #include <iostream>
 #include <vector>
@@ -26,7 +26,7 @@
 
 using namespace std;
 
-namespace unity
+namespace lomiri
 {
 
 namespace gmenuharness
@@ -1029,4 +1029,4 @@ void MenuItemMatcher::match(
 
 }   // namepsace gmenuharness
 
-}   // namespace unity
+}   // namespace lomiri
diff --git a/src/MenuMatcher.cpp b/src/MenuMatcher.cpp
index d8cd3ad..126725d 100644
--- a/src/MenuMatcher.cpp
+++ b/src/MenuMatcher.cpp
@@ -16,8 +16,8 @@
  * Authored by: Pete Woods <pete.woods@canonical.com>
  */
 
-#include <unity/gmenuharness/MenuMatcher.h>
-#include <unity/gmenuharness/MatchUtils.h>
+#include <lomiri/gmenuharness/MenuMatcher.h>
+#include <lomiri/gmenuharness/MatchUtils.h>
 
 #include <chrono>
 #include <iostream>
@@ -26,7 +26,7 @@
 
 using namespace std;
 
-namespace unity
+namespace lomiri
 {
 
 namespace gmenuharness
@@ -262,4 +262,4 @@ MatchResult MenuMatcher::match() const
 
 }   // namespace gmenuharness
 
-}   // namespace unity
+}   // namespace lomiri
diff --git a/src/libgmenuharness.map b/src/libgmenuharness.map
index 9b35005..2b97b22 100644
--- a/src/libgmenuharness.map
+++ b/src/libgmenuharness.map
@@ -1,11 +1,11 @@
 {
 global:
     extern "C++" {
-        unity::gmenuharness::[!i]*;
-        typeinfo?for?unity::gmenuharness::[!i]*;
-        typeinfo?name?for?unity::gmenuharness::[!i]*;
-        vtable?for?unity::gmenuharness::[!i]*;
-        VTT?for?unity::gmenuharness::[!i]*;
+        lomiri::gmenuharness::[!i]*;
+        typeinfo?for?lomiri::gmenuharness::[!i]*;
+        typeinfo?name?for?lomiri::gmenuharness::[!i]*;
+        vtable?for?lomiri::gmenuharness::[!i]*;
+        VTT?for?lomiri::gmenuharness::[!i]*;
     };
 local:
     extern "C++" {
diff --git a/tests/functional/FunctionalTests.cpp b/tests/functional/FunctionalTests.cpp
index aa0790d..98eb2cd 100644
--- a/tests/functional/FunctionalTests.cpp
+++ b/tests/functional/FunctionalTests.cpp
@@ -16,7 +16,7 @@
  * Author: Pete Woods <pete.woods@canonical.com>
  */
 
-#include <unity/gmenuharness/MenuMatcher.h>
+#include <lomiri/gmenuharness/MenuMatcher.h>
 
 #include <gtest/gtest.h>
 
@@ -28,7 +28,7 @@
 
 using namespace std;
 using namespace QtDBusTest;
-namespace mh = unity::gmenuharness;
+namespace mh = lomiri::gmenuharness;
 
 namespace
 {
diff --git a/tests/functional/menus/Deeper.cpp b/tests/functional/menus/Deeper.cpp
index ff55cdf..569525b 100644
--- a/tests/functional/menus/Deeper.cpp
+++ b/tests/functional/menus/Deeper.cpp
@@ -16,7 +16,7 @@
  * Author: Pete Woods <pete.woods@canonical.com>
  */
 
-#include <unity/gmenuharness/MatchUtils.h>
+#include <lomiri/gmenuharness/MatchUtils.h>
 
 #include <glib-object.h>
 #include <gio/gio.h>
@@ -24,7 +24,7 @@
 #include <memory>
 
 using namespace std;
-using namespace unity::gmenuharness;
+using namespace lomiri::gmenuharness;
 
 pair<shared_ptr<GMenu>, shared_ptr<GSimpleActionGroup>>
 createMenu()
diff --git a/tests/functional/menus/MenuMain.cpp b/tests/functional/menus/MenuMain.cpp
index cbc7cbe..b5b11e2 100644
--- a/tests/functional/menus/MenuMain.cpp
+++ b/tests/functional/menus/MenuMain.cpp
@@ -16,8 +16,8 @@
  * Author: Pete Woods <pete.woods@canonical.com>
  */
 
-#include <unity/gmenuharness/MatchUtils.h>
-#include <unity/util/ResourcePtr.h>
+#include <lomiri/gmenuharness/MatchUtils.h>
+#include <lomiri/util/ResourcePtr.h>
 
 #include <glib-object.h>
 #include <gio/gio.h>
@@ -28,8 +28,8 @@
 #include <functional>
 
 using namespace std;
-using namespace unity::util;
-using namespace unity::gmenuharness;
+using namespace lomiri::util;
+using namespace lomiri::gmenuharness;
 
 static gboolean
 onSignal(gpointer data)
diff --git a/tests/functional/menus/Simple.cpp b/tests/functional/menus/Simple.cpp
index 534ccde..1e89d18 100644
--- a/tests/functional/menus/Simple.cpp
+++ b/tests/functional/menus/Simple.cpp
@@ -16,7 +16,7 @@
  * Author: Pete Woods <pete.woods@canonical.com>
  */
 
-#include <unity/gmenuharness/MatchUtils.h>
+#include <lomiri/gmenuharness/MatchUtils.h>
 
 #include <glib-object.h>
 #include <gio/gio.h>
@@ -24,7 +24,7 @@
 #include <memory>
 
 using namespace std;
-using namespace unity::gmenuharness;
+using namespace lomiri::gmenuharness;
 
 pair<shared_ptr<GMenu>, shared_ptr<GSimpleActionGroup>>
 createMenu()
diff --git a/tests/unit/TestMatchResult.cpp b/tests/unit/TestMatchResult.cpp
index 4e30a5e..644a801 100644
--- a/tests/unit/TestMatchResult.cpp
+++ b/tests/unit/TestMatchResult.cpp
@@ -16,12 +16,12 @@
  * Author: Pete Woods <pete.woods@canonical.com>
  */
 
-#include <unity/gmenuharness/MatchResult.h>
+#include <lomiri/gmenuharness/MatchResult.h>
 
 #include <gtest/gtest.h>
 
 using namespace std;
-namespace mh = unity::gmenuharness;
+namespace mh = lomiri::gmenuharness;
 
 namespace
 {
-- 
2.31.1

